---
import Layout from "../layouts/Layout.astro";
import "../styles/base.css";
---

    <Layout title="Donate">
        <div class="flex flex-col justify-center items-center text-center px-4 py-10 min-h-[80vh] w-full">
            <div class="mb-6 max-w-3xl">
                <h1 class="text-xl sm:text-2xl md:text-3xl font-bold">
                    THANK YOU FOR CONSIDERING A DONATION!
                </h1>
                <p class="mt-5">
                    After launching Tech For Palestine last year, we've helped bring a number of impactful projects to life.
                    Projects like Media Bias Meter, Boycat, Find a Protest, and Newscord.
                </p>
                <p class="mt-3">
                    Now, we need your support. Your donation will allow us to hire professionals, strengthen existing projects, and create even more initiatives for a free Palestine.
                </p>
            </div>

            <!-- Placeholder for A/B test content -->
            <div id="donation-variant" class="w-full max-w-md"></div>

            <p class="mt-6 text-sm sm:text-base">
                Tech for Palestine is a registered 501(c)(3) nonprofit.
            </p>
            <p class="mt-3 text-sm sm:text-base">
                If youâ€™d like to donate through a Donor-Advised Fund (DAF), family trust, or other structured giving method,
                please email <b>donations@techforpalestine.org</b> so we can assist you.
            </p>
        </div>

        <script>
            document.addEventListener("DOMContentLoaded", function () {
            var variant = localStorage.getItem("donation_variant");
            if (!variant) {
            variant = Math.random() < 0.5 ? "A" : "B";
            localStorage.setItem("donation_variant", variant);
        }

            const container = document.getElementById("donation-variant");
            // Log variant to Plausible
            if(variant =='A'){
            plausible("Monthly-donate", {
            props: { variant: variant }
        });
        }else {
            plausible("One-time-donate", {
            props: {variant: variant}
        });
        }



            if (variant === "A") {
            container.innerHTML = `
          <div data-entity="EMBED_FORM" data-source="CharityStack" id="6141ae9a-cdcd-4e14-b0d6-b5e0fa766abf"></div>
        `;
            plausible("Monthly-donate", {
            props: { variant: variant }
        });
        } else {
            container.innerHTML = `
          <div data-entity="EMBED_FORM" data-source="CharityStack" id="f817c26f-0e60-47dd-a9fa-1652e1c17ec3"></div>
        `;
            plausible("One-time-donate", {
            props: {variant: variant}
        });
        }

            const script = document.createElement("script");
            script.defer = true;
            script.id = "charitystack-embed";
            script.dataset.id = "M_lDGj72xT61";
            script.src = "https://prod-donation-elements-b-donationelementsjsfilesb-1m4f4dl6p6b21.s3.us-east-2.amazonaws.com/bundle.js";
            document.body.appendChild(script);
        });
        </script>
    </Layout>
