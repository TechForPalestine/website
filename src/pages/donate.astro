---
import SignUpForm from "../structures/SignUpForm.astro";
import Layout from "../layouts/Layout.astro";
import "../styles/base.css";
---

    <Layout title="Donate">
        <div style="display: flex; flex-direction: column; justify-content: center; align-items: center; text-align: center; height: 80vh; width: 100%;">
            <div style="margin-bottom: 20px;">
                <h1><b>THANK YOU FOR CONSIDERING A DONATION!</b></h1>
                <p style="margin-top: 20px;">After launching Tech For Palestine last year, we've helped bring a number of impactful projects to life. Projects like Media Bias Meter, Boycat, Find a Protest, and Newscord.</p>
                <p>Now, we need your support. Your donation will allow us to hire professionals, strengthen existing projects, and create even more initiatives for a free Palestine. </p>
            </div>

            <!-- Placeholder for A/B test content -->
            <div id="donation-variant"></div>

            <p style="margin-top: 20px;">
                Tech for Palestine is a registered 501(c)(3) nonprofit.
            </p>
            <p style="margin-top: 20px;">If youâ€™d like to donate through a Donor-Advised Fund (DAF), family trust, or other structured giving method, please email <b>donations@techforpalestine.org</b> so we can assist you.
            </p>
        </div>

        <!-- CharityStack Embed Script -->
        <script>
            document.addEventListener("DOMContentLoaded", function () {
            const variant = Math.random() < 0.5 ? "A" : "B";
            const container = document.getElementById("donation-variant");

            umami.track('ab_test_variant', { variant:variant });


            if (variant === "A") {
            container.innerHTML = `
                    <div data-entity="EMBED_FORM" data-source="CharityStack" id="6141ae9a-cdcd-4e14-b0d6-b5e0fa766abf"></div>

        `;
        } else {
            container.innerHTML = `
          <div data-entity="EMBED_FORM" data-source="CharityStack" id="f817c26f-0e60-47dd-a9fa-1652e1c17ec3"></div>

        `;
        }

            // Inject CharityStack script AFTER the correct form is in DOM
            const script = document.createElement("script");
            script.defer = true;
            script.id = "charitystack-embed";
            script.dataset.id = "M_lDGj72xT61"; // Replace with your correct embed key
            script.src =
            "https://prod-donation-elements-b-donationelementsjsfilesb-1m4f4dl6p6b21.s3.us-east-2.amazonaws.com/bundle.js";
            document.body.appendChild(script);

        });
        </script>
    </Layout>
