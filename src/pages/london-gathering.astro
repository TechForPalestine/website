---
import Layout from "../layouts/Layout.astro";
import LondonGatheringComponent from "../components/LondonGathering.tsx";
import { fetchNotionAgenda } from "../store/notionClient";
import "../styles/base.css";

// Fetch data server-side for faster initial load
let agendaData = { agendaItems: [], speakers: [] };
try {
    agendaData = await fetchNotionAgenda(Astro.locals);
} catch (error) {
    console.error('Error fetching agenda data:', error);
}
---

<Layout title="T4P Community Gathering - London">
    <LondonGatheringComponent
        client:only="react"
        initialAgendaData={agendaData}
    />
</Layout>