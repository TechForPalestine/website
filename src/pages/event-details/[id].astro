---
import Layout from "../../layouts/Layout.astro";
import PageHeader from "../../components/PageHeader.astro";
import EventDetails from "../../components/EventDetails";
import { fetchNotionEventById } from "../../store/notionClient";
import { Astro } from "astro";

const { params } = Astro;
let event = null;

try {
    event = await fetchNotionEventById(params.id);
} catch (err) {
    console.error("Error fetching event:", err);
}
---

    <Layout title={event?.title || "Event Details"}>
        <PageHeader
            overline="Tech for Palestine"
            title={event?.title || "Event"}
            subtitle="Explore details about this event including location, time, and resources."
        />

        {event ? (
            <EventDetails event={event} client:only="react" />
        ) : (
            <div class="text-center py-10 text-gray-600">Event not found.</div>
        )}
    </Layout>
