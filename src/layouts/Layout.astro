---
import Navigation from "../components/Navigation.astro";
import Footer from "../components/Footer.astro";
interface Props {
  title: string;
  description?: string;
  image?: string;
}

const {
  title,
  description = "T4P is an incubator for Palestine advocacy projects.",
  image = "https://techforpalestine.org/t4p-social-logo.png",
} = Astro.props;

const canonicalUrl = new URL(
  Astro.url.pathname,
  Astro.site || "https://techforpalestine.org"
).toString();
---

<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="description" content={description} />
    <meta name="viewport" content="width=device-width" />
    <link rel="icon" type="image/svg+xml" href="/favicon.png" />
    <link rel="me" href="https://infosec.exchange/@tech4palestine" />
    <script type="speculationrules">
      {
        "prerender": [{ "urls": ["/", "/about", "/incubator", "/tools", "/help/hire"] }]
      }
    </script>
    <meta name="generator" content={Astro.generator} />
    <title>{title}</title>
    <meta property="og:title" content={title} />
    <meta property="og:description" content={description} />
    <meta property="og:image" content={image} />
    <meta property="og:url" content={canonicalUrl} />
    <meta property="og:type" content="website" />
    <meta property="twitter:card" name="twitter:card" content="summary_large_image" />
    <meta property="twitter:site" name="twitter:site" content="@tech4palestine" />
    <meta property="twitter:title" name="twitter:title" content={title} />
    <meta property="twitter:description" name="twitter:description" content={description} />
    <meta property="twitter:image" name="twitter:image" content={image} />
    <meta property="twitter:creator" name="twitter:creator" content="@tech4palestine" />

    <slot name="head" />

    <script defer src="https://pal-chat.net/pal-chat-lite/latest/ChatBox.js"></script>
    <!-- Privacy-friendly analytics by Plausible -->
    <script async src="https://plausible.io/js/pa-gMn1NrWB3uBANu6ua9M8N.js"></script>
    <script>
      (window as any).plausible =
        (window as any).plausible ||
        function () {
          (((window as any).plausible as any).q = ((window as any).plausible as any).q || []).push(
            arguments
          );
        };
      ((window as any).plausible as any).init =
        ((window as any).plausible as any).init ||
        function (i: any) {
          ((window as any).plausible as any).o = i || {};
        };
      ((window as any).plausible as any).init();
    </script>
  </head>
  <body class="relative flex min-h-screen flex-col bg-white text-gray-900">
    <Navigation />

    <!-- Floating Donate Button -->
    <a
      href="/donate"
      class="donate-link fixed right-0 top-1/2 z-50 bg-green-800 px-3 py-5 text-white shadow-lg transition hover:bg-green-900"
      style="
    writing-mode: vertical-rl;
    transform: translateY(-50%) rotate(180deg);
    transform-origin: center center;
    border-top-right-radius: 0.5rem;
    border-bottom-right-radius: 0.5rem;
    border-top-left-radius: 0;
    border-bottom-left-radius: 0;
  "
    >
      Donate
    </a>

    <div class="flex-grow">
      <slot />
    </div>
    <Footer />
  </body>
</html>
